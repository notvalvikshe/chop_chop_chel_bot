# Copilot Project Instructions — t-bot

Этот файл описывает, на какую документацию опираться при работе с проектом и какие базовые правила соблюдать при генерации кода.

## 1. Документация проекта

- Общая архитектура, структура слоёв, договорённости по разработке и рекомендации по расширению проекта описаны в:
  - [docs/architecture.md](docs/architecture.md)
- Перед изменением или добавлением кода следует:
  1. Ознакомиться с актуальными разделами в [docs/architecture.md](docs/architecture.md).
  2. Следовать описанной там архитектуре и паттернам (модули, сервисы, репозитории, работа с БД, конфигурация и т.д.).
  3. При изменении архитектуры/поведения обязательно актуализировать [docs/architecture.md](docs/architecture.md) (сначала обновить документ, затем код).

## 2. Документация по API / бот‑командам

- Описание API/команд/сцен бота, а также формат входных и выходных данных расположено в файле:
  - [docs/apidoc.md](docs/apidoc.md)
- При добавлении новых хендлеров, команд, сценариев или интеграций с внешними системами необходимо:
  1. Сначала посмотреть, есть ли уже соответствующее описание или соглашения в [docs/apidoc.md](docs/apidoc.md).
  2. Синхронизировать новую реализацию с документацией (при необходимости — дополнить/обновить [docs/apidoc.md](docs/apidoc.md)).
  3. Любое изменение контрактов/команд/поведения бота сопровождать обновлением [docs/apidoc.md](docs/apidoc.md), чтобы документация оставалась источником правды.

## 3. Общие правила для генерации кода

При генерации/изменении кода в этом репозитории следует:

- Опираться на архитектуру и договорённости из [docs/architecture.md](docs/architecture.md).
- Опираться на описание API и контрактов из [docs/apidoc.md](docs/apidoc.md).
- Не менять существующую архитектурную структуру без явного запроса.
- Для новых фич:
  - Поддерживать существующий стиль модульности (NestJS‑модули, сервисы, репозитории).
  - Хранить бизнес‑логику в доменных сервисах, а не в слое бота.
  - Работу с БД реализовывать через Drizzle ORM и соответствующие репозитории.

Этот файл служит точкой входа для всех последующих подсказок и генерации кода в этом проекте.